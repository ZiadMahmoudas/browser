import{a as k}from"./chunk-SZBUW7HL.js";import{a as U}from"./chunk-L7DWKR3J.js";import{n as P}from"./chunk-XDVOVM47.js";import{e as M,j as v}from"./chunk-RDDNRQB3.js";import{B as u,Eb as _,Jb as C,Lb as O,Ta as c,Wb as o,Xb as d,Za as p,cb as f,e as S,ha as b,hb as x,ia as g,vb as h,wb as n,xb as r}from"./chunk-G3DW5CM7.js";var w=S(k());function E(s,t){if(s&1){let e=_();n(0,"tr")(1,"td",6),o(2),r(),n(3,"td",7),o(4),r(),n(5,"td",8),o(6),r(),n(7,"td",9)(8,"button",10),C("click",function(){let l=b(e).$implicit,m=O();return g(m.deleteUser(l.id))}),o(9," Delete "),r()()()}if(s&2){let e=t.$implicit;c(2),d(e.id),c(2),d(e.email),c(2),d(e.username)}}var y=class s{constructor(t,e){this.UsersServices=t;this.toastr=e;this.audio.src="audio/rang.mp3",this.audio.load()}users=[];previousUserCount=0;audio=new Audio;pollingSubscription;trackByUserId;deleteUser(t){w.default.fire({title:"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F\u061F",text:"\u0644\u0646 \u062A\u062A\u0645\u0643\u0646 \u0645\u0646 \u0627\u0644\u062A\u0631\u0627\u062C\u0639 \u0639\u0646 \u0647\u0630\u0627!",icon:"warning",showCancelButton:!0,confirmButtonText:"\u0646\u0639\u0645\u060C \u0627\u062D\u0630\u0641\u0647!",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621"}).then(e=>{e.isConfirmed&&this.UsersServices.deleteUser(t).subscribe({next:i=>{console.log("Res:",i),this.users=this.users.filter(l=>l.id!==t),this.toastr.success("Delete Successfully")},error:i=>{console.log(i.status),this.toastr.error("Error something Wrong")}})})}ngOnInit(){this.pollingSubscription=u(19e4).subscribe(()=>{this.checkForNewUsers()}),this.checkForNewUsers()}ngOnDestroy(){this.pollingSubscription?.unsubscribe()}checkForNewUsers(){this.UsersServices.getAllUsers().subscribe({next:t=>{let e=t??[],i=this.users.map(a=>a.id);e.map(a=>a.id).some(a=>!i.includes(a))&&this.playNotificationSound(),this.users=e},error:t=>{t.status===403&&this.toastr.error("Don't Play Here Again \u{1F608}")}})}playNotificationSound(){this.audio.play().catch(()=>{})}static \u0275fac=function(e){return new(e||s)(p(U),p(P))};static \u0275cmp=f({type:s,selectors:[["app-users"]],decls:17,vars:2,consts:[[1,""],[1,"table-responsive","small"],[1,"table","table-striped","table-sm"],["scope","col"],["id","users-table-body"],[4,"ngFor","ngForOf","ngForTrackBy"],["data-label","id:"],["data-label","Email:"],["data-label","UserName:"],[1,"d-flex","gap-3"],[1,"btn","btn-danger","btn-sm","delete-btn",3,"click"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"h1"),o(2,"Users"),r(),n(3,"div",1)(4,"table",2)(5,"thead")(6,"tr")(7,"th",3),o(8,"Id"),r(),n(9,"th",3),o(10,"Email"),r(),n(11,"th",3),o(12,"UserName"),r(),n(13,"th",3),o(14,"Actions"),r()()(),n(15,"tbody",4),x(16,E,10,3,"tr",5),r()()()()),e&2&&(c(16),h("ngForOf",i.users)("ngForTrackBy",i.trackByUserId))},dependencies:[v,M],styles:['.main-content[_ngcontent-%COMP%]{flex-grow:1;padding:30px;background-color:#fff;margin:20px;border-radius:8px;box-shadow:0 4px 10px #0000000d}.main-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:25px;font-size:2em;border-bottom:1px solid #eee;padding-bottom:15px}.users-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px;border-radius:8px;overflow:hidden}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 95px;text-align:left;border-bottom:1px solid #ddd}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2;color:#555;font-weight:700;text-transform:uppercase}.users-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.users-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;border:none;padding:8px 12px;border-radius:5px;cursor:pointer;margin-left:5px;transition:background-color .3s ease}.users-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{background-color:#e74c3c}@media (min-width: 768px){.users-table[_ngcontent-%COMP%]{border:0}.users-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:1px solid #ddd;display:block;margin-bottom:1.5rem;border-radius:8px;overflow:hidden;box-shadow:0 2px 5px #0000001a;background-color:#fff}.users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;display:block;position:relative;font-size:.9em}.users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);position:absolute;left:0;width:45%;padding-left:15px;font-weight:700;text-align:left;color:#6c757d}.users-table[_ngcontent-%COMP%]   td.d-flex.gap-3[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;padding:12px 15px;border-bottom:none}.users-table[_ngcontent-%COMP%]   td.d-flex.gap-3[_ngcontent-%COMP%]:before{content:"Actions:";left:0;width:45%;padding-left:15px;font-weight:700;text-align:left;color:#6c757d}}']})};export{y as Users};
