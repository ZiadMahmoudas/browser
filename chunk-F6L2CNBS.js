import{a as v,b as f,c as h,d as g,i as S,j as O,k as y,l as E,p as x,q as D,s as F,u as I}from"./chunk-MHH2VTG2.js";import{a as N}from"./chunk-L7DWKR3J.js";import{b}from"./chunk-C345KUIT.js";import{n as C}from"./chunk-XDVOVM47.js";import"./chunk-RDDNRQB3.js";import{Jb as p,Ta as d,Wb as o,Yb as m,Za as s,cb as u,vb as l,wb as t,xb as r,yb as n}from"./chunk-G3DW5CM7.js";var w=class c{constructor(i,e,a,T){this.FB=i;this.tostar=e;this.dashboardboard=a;this.route=T;this.offer=this.FB.group({title:["",f.required],discount:["",f.required],endDate:["",f.required]})}isEdit=!1;editProductId=0;ngOnInit(){let i=this.route.snapshot.params.id;i&&(this.isEdit=!0,this.editProductId=+i,this.loadOffer(this.editProductId))}offer;submit(){if(this.offer.invalid){this.tostar.warning("Please enter all fields");return}this.isEdit?this.dashboardboard.UpdateOffer(this.editProductId,this.offer.value).subscribe({next:()=>{this.tostar.success("Offer updated successfully")},error:()=>{this.tostar.error("Failed to update offer")}}):this.dashboardboard.CreateOffers(this.offer.value).subscribe({next:()=>{this.tostar.success("Offer created successfully"),this.offer.reset()},error:()=>{this.tostar.error("Failed to create offer")}})}loadOffer(i){this.dashboardboard.getOneOffer(i).subscribe(e=>{e&&this.offer.patchValue({title:e.title,discount:e.discount,endDate:e.endDate})})}static \u0275fac=function(e){return new(e||c)(s(F),s(C),s(N),s(b))};static \u0275cmp=u({type:c,selectors:[["app-offer"]],decls:29,vars:4,consts:[[1,"container","my-5"],[1,"row","justify-content-center"],[1,"col-md-8","col-lg-6"],[1,"card","shadow-lg","border-0","rounded-lg"],[1,"card-header","bg-warning","text-dark","text-center","py-4","rounded-top"],[1,"mb-0"],[1,"fas","fa-tags","me-2"],[1,"card-body","p-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","offerTitle",1,"form-label","fw-bold"],["type","text","id","offerTitle","formControlName","title","placeholder","e.g., Summer Sale, 50% Off",1,"form-control","form-control-lg"],["for","discount",1,"form-label","fw-bold"],[1,"input-group"],["type","number","id","discount","formControlName","discount","placeholder","e.g., 20","min","0","max","100",1,"form-control","form-control-lg"],[1,"input-group-text"],[1,"mb-4"],["for","endDate",1,"form-label","fw-bold"],["type","date","id","eventDate","formControlName","endDate",1,"form-control","form-control-lg"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-warning","btn-lg",3,"disabled"],[1,"fas","fa-save","me-2"]],template:function(e,a){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),n(6,"i",6),o(7),r()(),t(8,"div",7)(9,"form",8),p("ngSubmit",function(){return a.submit()}),t(10,"div",9)(11,"label",10),o(12,"Offer Title"),r(),n(13,"input",11),r(),t(14,"div",9)(15,"label",12),o(16,"Discount Percentage"),r(),t(17,"div",13),n(18,"input",14),t(19,"span",15),o(20,"%"),r()()(),t(21,"div",16)(22,"label",17),o(23,"End Date"),r(),n(24,"input",18),r(),t(25,"div",19)(26,"button",20),n(27,"i",21),o(28),r()()()()()()()()),e&2&&(d(7),m(" ",a.isEdit?"Update Offer":"Create Offer"," "),d(2),l("formGroup",a.offer),d(17),l("disabled",a.offer.invalid),d(2),m(" ",a.isEdit?"Update Offer":"Add Offer"," "))},dependencies:[I,S,v,O,h,g,D,x,y,E],encapsulation:2})};export{w as Offer};
