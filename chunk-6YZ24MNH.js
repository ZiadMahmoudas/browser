import{a as w}from"./chunk-SZBUW7HL.js";import{a as U}from"./chunk-L7DWKR3J.js";import{n as y}from"./chunk-XDVOVM47.js";import{e as h,j as x}from"./chunk-RDDNRQB3.js";import{Eb as b,Jb as v,Lb as g,Ta as o,Wb as n,Xb as l,Za as f,cb as p,e as k,ha as m,hb as u,ia as d,vb as S,wb as i,xb as r}from"./chunk-G3DW5CM7.js";var E=k(w());function F(a,t){if(a&1){let e=b();i(0,"tr")(1,"td",6),n(2),r(),i(3,"td",7),n(4),r(),i(5,"td",8),n(6),r(),i(7,"td",9)(8,"button",10),v("click",function(){let c=m(e).$implicit,T=g();return d(T.deletestaff(c.id))}),n(9," Delete "),r()()()}if(a&2){let e=t.$implicit;o(2),l(e.id),o(2),l(e.email),o(2),l(e.username)}}var _=class a{constructor(t,e){this.UsersServices=t;this.toastr=e}staffs=[];previousUserCount=0;audio=new Audio;pollingSubscription;trackByUserId;deletestaff(t){E.default.fire({title:"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F\u061F",text:"\u0644\u0646 \u062A\u062A\u0645\u0643\u0646 \u0645\u0646 \u0627\u0644\u062A\u0631\u0627\u062C\u0639 \u0639\u0646 \u0647\u0630\u0627!",icon:"warning",showCancelButton:!0,confirmButtonText:"\u0646\u0639\u0645\u060C \u0627\u062D\u0630\u0641\u0647!",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621"}).then(e=>{e.isConfirmed&&this.UsersServices.deleteStaff(t).subscribe({next:s=>{console.log("Res:",s),this.staffs=this.staffs.filter(c=>c.id!==t),this.toastr.success("Delete Successfully")},error:s=>{console.log(s.status),this.toastr.error("Error something Wrong")}})})}ngOnInit(){this.checkForNewUsers()}ngOnDestroy(){this.pollingSubscription?.unsubscribe()}checkForNewUsers(){this.UsersServices.getAllStaff().subscribe({next:t=>{let e=t??[];console.log(t),this.staffs=e},error:t=>{t.status===403&&this.toastr.error("Don't Play Here Again \u{1F608}")}})}static \u0275fac=function(e){return new(e||a)(f(U),f(y))};static \u0275cmp=p({type:a,selectors:[["app-staff"]],decls:17,vars:2,consts:[[1,""],[1,"table-responsive","small"],[1,"table","table-striped","table-sm"],["scope","col"],["id","users-table-body"],[4,"ngFor","ngForOf","ngForTrackBy"],["data-label","id:"],["data-label","Email:"],["data-label","UserName:"],[1,"d-flex","gap-3"],[1,"btn","btn-danger","btn-sm","delete-btn",3,"click"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"h1"),n(2,"Users"),r(),i(3,"div",1)(4,"table",2)(5,"thead")(6,"tr")(7,"th",3),n(8,"Id"),r(),i(9,"th",3),n(10,"Email"),r(),i(11,"th",3),n(12,"UserName"),r(),i(13,"th",3),n(14,"Actions"),r()()(),i(15,"tbody",4),u(16,F,10,3,"tr",5),r()()()()),e&2&&(o(16),S("ngForOf",s.staffs)("ngForTrackBy",s.trackByUserId))},dependencies:[x,h],encapsulation:2})};export{_ as Staff};
