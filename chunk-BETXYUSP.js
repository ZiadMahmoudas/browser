import{a as D}from"./chunk-SZBUW7HL.js";import{a as k}from"./chunk-L7DWKR3J.js";import{a as O}from"./chunk-G5KA7DMQ.js";import{b as M}from"./chunk-KXU7AWJN.js";import{b as S,e as V}from"./chunk-C345KUIT.js";import{n as T}from"./chunk-XDVOVM47.js";import{j as y}from"./chunk-RDDNRQB3.js";import{Ab as n,Bb as x,Eb as C,Fb as E,Kb as g,Lb as m,Qa as v,Ta as c,Wb as a,Xb as w,Yb as l,Za as s,bc as P,cb as b,e as R,ha as u,ia as p,rb as _,sb as f,zb as o}from"./chunk-G3DW5CM7.js";var A=R(D());function j(e,i){if(e&1&&(o(0,"div",9)(1,"p",14),a(2),n(),o(3,"p",10),a(4),n()()),e&2){let t=m(2);c(2),l("",t.product.salary,"EGP"),c(2),l("",t.product.priceAfterDiscount,"EGP")}}function B(e,i){if(e&1&&(o(0,"p",10),a(1),n()),e&2){let t=m(2);c(),l("",t.product.priceAfterDiscount,"EGP")}}function F(e,i){if(e&1){let t=C();o(0,"button",17),g("click",function(){u(t);let r=m(3);return p(r.addToCart())}),x(1,"i",18),a(2," Add to Cart "),n()}}function U(e,i){if(e&1){let t=C();o(0,"button",19),g("click",function(){u(t);let r=m(3);return p(r.RemoveFromcart())}),x(1,"i",20),a(2," Remove From Cart "),n()}}function z(e,i){if(e&1&&_(0,F,3,0,"button",15)(1,U,3,0,"button",16),e&2){let t=m(2);f(t.added?0:1)}}function G(e,i){if(e&1){let t=C();o(0,"button",21),g("click",function(){u(t);let r=m(2);return p(r.edit(r.product.id))}),a(1,"EditProduct"),n(),o(2,"button",19),g("click",function(){u(t);let r=m(2);return p(r.RemoveItem(r.product.id))}),a(3," DeleteProduct "),n()}}function L(e,i){if(e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),x(4,"img",4),n(),o(5,"div",5)(6,"h1",6),a(7),n(),o(8,"p",7),a(9),n(),o(10,"div",8),_(11,j,5,2,"div",9)(12,B,2,1,"p",10),n(),o(13,"div",11)(14,"div",9),_(15,z,2,1)(16,G,4,0),n()(),x(17,"hr",12),o(18,"small",13),a(19),n()()()()()),e&2){let t=m();c(4),E("src",P("https://localhost:7054",t.product.images),v),c(3),w(t.product.productName),c(2),l(" ",t.product.productDescription," "),c(2),f(t.product.offer?11:12),c(4),f(t.roles()?16:15),c(4),l(" Category: :",t.product.stock," ")}}var I=class e{constructor(i,t,d,r,h){this.route=i;this.auth=t;this.dashboardService=d;this.router=r;this.toastr=h}product=null;added=!0;allProducts=[];addToCart(){this.added=!1}RemoveFromcart(){this.added=!0}cachedProducts=[];ngOnInit(){let i=+this.route.snapshot.params.id;this.cachedProducts&&this.cachedProducts.length>0?(this.product=this.cachedProducts.find(t=>+t.productId===i),this.product||this.router.navigate(["/not-found"])):this.dashboardService.GetAllProduct().subscribe({next:t=>{this.cachedProducts=Array.isArray(t)?t:t.data||[],this.product=this.cachedProducts.find(d=>d.id===i),this.product||this.router.navigate(["/not-found"])},error:()=>{this.router.navigate(["/error"])}})}edit(i){this.router.navigate(["/Dashboard/product",i])}RemoveItem(i){A.default.fire({title:"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F\u061F",text:"\u0647\u0644 \u062A\u0631\u064A\u062F \u062D\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0645\u0646\u062A\u062C\u061F \u0644\u0627 \u064A\u0645\u0643\u0646 \u0627\u0644\u062A\u0631\u0627\u062C\u0639 \u0639\u0646 \u0647\u0630\u0647 \u0627\u0644\u0639\u0645\u0644\u064A\u0629!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"\u0646\u0639\u0645\u060C \u0627\u062D\u0630\u0641\u0647!",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621"}).then(t=>{t.isConfirmed&&this.dashboardService.DeleteProduct(i).subscribe({next:d=>{this.toastr.success("Removed SuccessFully"),this.router.navigateByUrl("/Home")},error:d=>{console.log(d),this.toastr.error("err")}})})}tag;roles(){let i="http://schemas.microsoft.com/ws/2008/06/identity/claims/role",t=this.auth.getAccessToken(),r=O(t)[i],h=!0;return r==="Admin"||r==="Staff"?h:!h}static \u0275fac=function(t){return new(t||e)(s(S),s(M),s(k),s(V),s(T))};static \u0275cmp=b({type:e,selectors:[["app-view"]],decls:1,vars:1,consts:[[1,"container","my-5"],[1,"card","product-detail-card","shadow-lg","border-0","rounded-lg"],[1,"row","g-0"],[1,"col-md-5","col-lg-6","d-flex","align-items-center","justify-content-center","p-3","p-md-4","bg-light","rounded-start-lg"],["alt","Product Name",1,"img-fluid","product-main-image","rounded","shadow-sm",3,"src"],[1,"col-md-7","col-lg-6","p-4","p-md-5","d-flex","flex-column","justify-content-center"],[1,"display-5","fw-bold","text-dark","mb-3"],[1,"lead","text-muted","mb-4"],[1,"d-flex","align-items-baseline","mb-3"],[1,"d-flex","gap-2"],[1,"product-price"],[1,"d-grid","gap-2"],[1,"my-4"],[1,"text-muted"],[1,"product-price","text-decoration-line-through"],[1,"btn","btn-success","btn-lg","custom-add-to-cart"],[1,"btn","btn-danger","btn-lg","custom-add-to-cart"],[1,"btn","btn-success","btn-lg","custom-add-to-cart",3,"click"],[1,"fas","fa-shopping-cart","me-2"],[1,"btn","btn-danger","btn-lg","custom-add-to-cart",3,"click"],[1,"fa-solid","fa-trash-clock"],[1,"btn","btn-primary","custom-add-to-cart",3,"click"]],template:function(t,d){t&1&&_(0,L,20,7,"div",0),t&2&&f(d.product?0:-1)},dependencies:[y],styles:[".product-detail-card[_ngcontent-%COMP%]{overflow:hidden}.product-main-image[_ngcontent-%COMP%]{max-width:100%;height:auto;max-height:450px;object-fit:contain;transition:transform .3s ease-in-out}.product-main-image[_ngcontent-%COMP%]:hover{transform:scale(1.03)}.product-price[_ngcontent-%COMP%]{color:#e44d26}.custom-add-to-cart[_ngcontent-%COMP%]{padding:10px 20px;font-size:1.2rem;font-weight:700;border-radius:8px;transition:background-color .3s ease,transform .3s ease;box-shadow:0 4px 10px #28a74533}.custom-add-to-cart[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 15px #28a7454d}@media (max-width: 767.98px){.product-detail-card[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{flex-direction:column}.custom-add-to-cart[_ngcontent-%COMP%]{padding:5px 8px}.product-detail-card[_ngcontent-%COMP%]   .col-md-5.rounded-start-lg[_ngcontent-%COMP%]{border-top-left-radius:.5rem!important;border-top-right-radius:.5rem!important;border-bottom-left-radius:0!important}.product-detail-card[_ngcontent-%COMP%]   .col-md-7[_ngcontent-%COMP%]{border-bottom-left-radius:.5rem!important;border-bottom-right-radius:.5rem!important;border-top-right-radius:0!important}.product-detail-card[_ngcontent-%COMP%]   .p-3.p-md-4[_ngcontent-%COMP%], .product-detail-card[_ngcontent-%COMP%]   .p-4.p-md-5[_ngcontent-%COMP%]{padding:1.5rem!important}.product-main-image[_ngcontent-%COMP%]{max-height:300px}.display-5[_ngcontent-%COMP%]{font-size:2.5rem!important}.display-6[_ngcontent-%COMP%]{font-size:2rem!important}}"]})};export{I as View};
